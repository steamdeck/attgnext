(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[5142],{1489:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>l});var a=s(5155),r=s(2115);function n(e){let{className:t=""}=e,[s,n]=(0,r.useState)([]),[l,i]=(0,r.useState)(null),[d,c]=(0,r.useState)(null),[o,x]=(0,r.useState)(""),[u,g]=(0,r.useState)(!0),[m,h]=(0,r.useState)(!1),[p,b]=(0,r.useState)("all"),[y,v]=(0,r.useState)(""),[j,N]=(0,r.useState)(!1);(0,r.useEffect)(()=>{f()},[]);let f=async()=>{try{g(!0);let e=await fetch("/api/pages"),t=await e.json();t.success&&n(t.pages)}catch(e){}finally{g(!1)}},w=e=>{i(e),c(null),x(""),v("")},C=e=>{c(e),x(e.content)},S=async()=>{if(d&&o.trim())try{h(!0);let e=await fetch("/api/pages",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({filePath:null==l?void 0:l.filePath,componentId:d.id,oldContent:d.content,newContent:o})}),t=await e.json();if(t.success){if(l){let e=s.map(e=>e.route===l.route?{...e,components:e.components.map(e=>e.id===d.id?{...e,content:o}:e)}:e);n(e),i(e.find(e=>e.route===l.route)||null)}let e=document.createElement("div");e.className="fixed top-4 right-4 bg-green-500 text-white px-4 py-2 rounded-lg shadow-lg z-50",e.textContent="Content updated successfully!",document.body.appendChild(e),setTimeout(()=>e.remove(),3e3)}else alert("Failed to update content: "+t.error)}catch(e){alert("Failed to save content")}finally{h(!1)}},k=(null==l?void 0:l.components.filter(e=>{let t="all"===p||e.type===p,s=""===y||e.name.toLowerCase().includes(y.toLowerCase())||e.content.toLowerCase().includes(y.toLowerCase());return t&&s}))||[],P=e=>{switch(e){case"text":default:return"\uD83D\uDCDD";case"title":return"\uD83D\uDCF0";case"subtitle":return"\uD83D\uDCCB";case"description":return"\uD83D\uDCC4";case"image":return"\uD83D\uDDBC️";case"link":return"\uD83D\uDD17";case"video":return"\uD83C\uDFA5"}},E=e=>{switch(e){case"text":return"bg-green-100 text-green-700";case"title":return"bg-blue-100 text-blue-700";case"subtitle":return"bg-purple-100 text-purple-700";case"description":default:return"bg-gray-100 text-gray-700";case"image":return"bg-orange-100 text-orange-700";case"link":return"bg-indigo-100 text-indigo-700";case"video":return"bg-red-100 text-red-700"}};return u?(0,a.jsx)("div",{className:"flex items-center justify-center h-64",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading pages..."})]})}):(0,a.jsxs)("div",{className:"space-y-6 ".concat(t),children:[(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Enhanced Page Editor"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Select a page and edit its content sections with advanced features"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4",children:[(0,a.jsx)("button",{onClick:()=>N(!j),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:j?"Hide Preview":"Show Preview"}),(0,a.jsx)("button",{onClick:f,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"\uD83D\uDD04 Refresh"})]})]})}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[(0,a.jsx)("div",{className:"lg:col-span-1",children:(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Select Page"}),(0,a.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:s.map(e=>(0,a.jsxs)("button",{onClick:()=>w(e),className:"w-full text-left p-4 rounded-lg border transition-colors ".concat((null==l?void 0:l.route)===e.route?"border-indigo-500 bg-indigo-50 text-indigo-700":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:[(0,a.jsx)("div",{className:"font-medium",children:e.name}),(0,a.jsx)("div",{className:"text-sm text-gray-500",children:e.route}),(0,a.jsxs)("div",{className:"text-xs text-gray-400 mt-1",children:[e.components.length," editable sections"]})]},e.route))})]})}),(0,a.jsx)("div",{className:"lg:col-span-1",children:l?(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"space-y-4 mb-4",children:[(0,a.jsxs)("h2",{className:"text-lg font-medium text-gray-900",children:["Edit Sections - ",l.name]}),(0,a.jsx)("div",{children:(0,a.jsx)("input",{type:"text",placeholder:"Search components...",value:y,onChange:e=>v(e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 text-sm focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500"})}),(0,a.jsx)("div",{children:(0,a.jsxs)("select",{value:p,onChange:e=>b(e.target.value),className:"w-full text-sm border border-gray-300 rounded px-3 py-2",children:[(0,a.jsx)("option",{value:"all",children:"All Types"}),(0,a.jsx)("option",{value:"text",children:"Text"}),(0,a.jsx)("option",{value:"title",children:"Titles"}),(0,a.jsx)("option",{value:"subtitle",children:"Subtitles"}),(0,a.jsx)("option",{value:"description",children:"Descriptions"}),(0,a.jsx)("option",{value:"image",children:"Images"}),(0,a.jsx)("option",{value:"link",children:"Links"})]})})]}),(0,a.jsx)("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:k.map(e=>(0,a.jsxs)("button",{onClick:()=>C(e),className:"w-full text-left p-3 rounded-lg border transition-colors ".concat((null==d?void 0:d.id)===e.id?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("span",{className:"text-lg",children:P(e.type)}),(0,a.jsx)("span",{className:"font-medium text-sm",children:e.name})]}),(0,a.jsx)("span",{className:"text-xs px-2 py-1 rounded ".concat(E(e.type)),children:e.type})]}),(0,a.jsx)("div",{className:"text-xs text-gray-500 truncate",children:e.content.length>60?e.content.substring(0,60)+"...":e.content}),e.context&&(0,a.jsxs)("div",{className:"text-xs text-gray-400 mt-1 truncate",children:["Context: ",e.context.substring(0,40),"..."]})]},e.id))})]}):(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"text-center text-gray-500",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"\uD83D\uDCC4"}),(0,a.jsx)("p",{children:"Select a page to start editing"})]})})}),(0,a.jsx)("div",{className:"lg:col-span-1",children:d?(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900",children:"Edit Content"}),(0,a.jsxs)("span",{className:"text-xs px-2 py-1 rounded ".concat(E(d.type)),children:[P(d.type)," ",d.type]})]}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["text"===d.type&&"Text Content","title"===d.type&&"Title Text","subtitle"===d.type&&"Subtitle Text","description"===d.type&&"Description Text","image"===d.type&&"Image URL/Path","link"===d.type&&"Link URL","video"===d.type&&"Video URL"]}),"image"===d.type?(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("input",{type:"text",value:o,onChange:e=>x(e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",placeholder:"Enter image URL or path"}),o&&(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-2",children:(0,a.jsx)("img",{src:o,alt:"Preview",className:"w-full h-32 object-cover rounded",onError:e=>{e.currentTarget.style.display="none"}})})]}):(0,a.jsx)("textarea",{value:o,onChange:e=>x(e.target.value),className:"w-full border border-gray-300 rounded-lg px-3 py-2 focus:ring-2 focus:ring-indigo-500 focus:border-indigo-500",rows:"description"===d.type?6:4,placeholder:"Enter ".concat(d.type," content")})]}),(0,a.jsxs)("div",{className:"text-xs text-gray-500 text-right",children:[o.length," characters"]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{onClick:S,disabled:m||!o.trim()||o===d.content,className:"flex-1 bg-indigo-600 text-white px-4 py-2 rounded-lg hover:bg-indigo-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:m?"Saving...":"Save Changes"}),(0,a.jsx)("button",{onClick:()=>{x(d.content)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 transition-colors",children:"Reset"})]}),d.context&&(0,a.jsxs)("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Context:"}),(0,a.jsx)("p",{className:"text-xs text-gray-600",children:d.context})]})]})]}):(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"text-center text-gray-500",children:[(0,a.jsx)("div",{className:"text-4xl mb-4",children:"✏️"}),(0,a.jsx)("p",{children:"Select a section to edit"})]})})})]}),j&&l&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Page Preview"}),(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-4",children:(0,a.jsx)("iframe",{src:l.route,className:"w-full h-96 border-0 rounded",title:"Preview of ".concat(l.name)})})]})]})}function l(){return(0,a.jsx)("div",{className:"min-h-screen bg-gray-50",children:(0,a.jsx)("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:(0,a.jsx)(n,{})})})}},5302:(e,t,s)=>{Promise.resolve().then(s.bind(s,1489))}},e=>{var t=t=>e(e.s=t);e.O(0,[8441,1684,7358],()=>t(5302)),_N_E=e.O()}]);