(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[3909],{6155:(e,s,t)=>{Promise.resolve().then(t.bind(t,6277))},6277:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var a=t(5155),l=t(2115);function i(e){let{onClose:s,onUpload:t}=e,[i,r]=(0,l.useState)([]),[n,d]=(0,l.useState)(!1),[c,o]=(0,l.useState)(!1),x=(0,l.useRef)(null),m=e=>{if(!e)return;let s=Array.from(e).filter(e=>["image/jpeg","image/jpg","image/png","image/gif","image/webp","image/svg+xml"].includes(e.type)&&e.size<=0xa00000);r(e=>[...e,...s])},g=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?o(!0):"dragleave"===e.type&&o(!1)},h=e=>{r(s=>s.filter((s,t)=>t!==e))},u=async()=>{if(0!==i.length){d(!0);try{for(let e of i){let s=new FormData;if(s.append("file",e),s.append("title",e.name.replace(/\.[^/.]+$/,"")),s.append("alt_text",""),s.append("caption",""),s.append("description",""),s.append("tags",""),!(await fetch("/api/images",{method:"POST",body:s})).ok)throw Error("Failed to upload ".concat(e.name))}t(),s()}catch(e){alert("Error uploading files. Please try again.")}finally{d(!1)}}},p=e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Upload Images"}),(0,a.jsx)("button",{onClick:s,className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]}),(0,a.jsx)("div",{className:"border-2 border-dashed rounded-lg p-8 text-center transition-colors ".concat(c?"border-indigo-500 bg-indigo-50":"border-gray-300"),onDragEnter:g,onDragLeave:g,onDragOver:g,onDrop:e=>{e.preventDefault(),e.stopPropagation(),o(!1),m(e.dataTransfer.files)},children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"text-6xl",children:"\uD83D\uDCC1"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-lg font-medium text-gray-900",children:"Drag and drop images here"}),(0,a.jsx)("p",{className:"text-gray-600",children:"or"}),(0,a.jsx)("button",{onClick:()=>{var e;return null==(e=x.current)?void 0:e.click()},className:"text-indigo-600 hover:text-indigo-700 font-medium",children:"browse files"})]}),(0,a.jsx)("p",{className:"text-sm text-gray-500",children:"Supports JPG, PNG, GIF, WebP, SVG (max 10MB each)"})]})}),(0,a.jsx)("input",{ref:x,type:"file",multiple:!0,accept:"image/*",onChange:e=>m(e.target.files),className:"hidden"}),i.length>0&&(0,a.jsxs)("div",{className:"mt-6",children:[(0,a.jsxs)("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:["Selected Files (",i.length,")"]}),(0,a.jsx)("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:i.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-gray-200 rounded flex items-center justify-center",children:(0,a.jsx)("span",{className:"text-lg",children:"\uD83D\uDDBC️"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.name}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:p(e.size)})]})]}),(0,a.jsx)("button",{onClick:()=>h(s),className:"text-red-600 hover:text-red-700 p-1",children:"\uD83D\uDDD1️"})]},s))})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 mt-6",children:[(0,a.jsx)("button",{onClick:s,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{onClick:u,disabled:0===i.length||n,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-400 text-white rounded-md font-medium transition-colors",children:n?"Uploading...":"Upload ".concat(i.length," Image").concat(1!==i.length?"s":"")})]})]})})})}function r(e){let{image:s,onClose:t,onUpdate:i}=e,[r,n]=(0,l.useState)({title:s.title||"",alt_text:s.alt_text||"",caption:s.caption||"",description:s.description||"",tags:s.tags||""}),[d,c]=(0,l.useState)(!1),[o,x]=(0,l.useState)(s.seo_score);(0,l.useEffect)(()=>{let e=0;r.title&&(e+=20),r.alt_text&&(e+=30),r.caption&&(e+=15),r.description&&(e+=20),r.tags&&(e+=15),x(e)},[r]);let m=async e=>{e.preventDefault(),c(!0);try{if((await fetch("/api/images/".concat(s.id),{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)})).ok)i(),t();else throw Error("Failed to update image")}catch(e){alert("Error updating image. Please try again.")}finally{c(!1)}},g=e=>{let{name:s,value:t}=e.target;n(e=>({...e,[s]:t}))};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit Image"}),(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsx)("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:(0,a.jsx)("img",{src:s.file_path,alt:s.alt_text||s.original_name,className:"w-full h-full object-cover"})}),(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 mb-3",children:"Image Information"}),(0,a.jsxs)("div",{className:"space-y-2 text-sm",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Filename:"}),(0,a.jsx)("span",{className:"font-medium",children:s.original_name})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Size:"}),(0,a.jsx)("span",{className:"font-medium",children:(e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]})(s.file_size)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Dimensions:"}),(0,a.jsxs)("span",{className:"font-medium",children:[s.width," \xd7 ",s.height]})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Format:"}),(0,a.jsx)("span",{className:"font-medium",children:s.format})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Usage Count:"}),(0,a.jsx)("span",{className:"font-medium",children:s.usage_count})]})]})]})]}),(0,a.jsx)("div",{children:(0,a.jsxs)("form",{onSubmit:m,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-4 rounded-lg",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("span",{className:"font-medium text-gray-900",children:"SEO Score"}),(0,a.jsxs)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(o>=80?"bg-green-100 text-green-800":o>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:[o,"/100"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full transition-all duration-300 ".concat(o>=80?"bg-green-500":o>=60?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(o,"%")}})})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-2",children:["Title ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("input",{type:"text",id:"title",name:"title",value:r.title,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Enter image title"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Used for SEO and accessibility"})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsxs)("label",{htmlFor:"alt_text",className:"block text-sm font-medium text-gray-700",children:["Alt Text ",(0,a.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,a.jsx)("button",{type:"button",onClick:()=>{let e=r.title||s.original_name,t="Image of ".concat(e.toLowerCase().replace(/[^a-z0-9\s]/g,"").trim());n(e=>({...e,alt_text:t}))},className:"text-xs text-indigo-600 hover:text-indigo-700",children:"Generate"})]}),(0,a.jsx)("textarea",{id:"alt_text",name:"alt_text",value:r.alt_text,onChange:g,rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Describe the image for screen readers and SEO"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"Critical for accessibility and SEO"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"caption",className:"block text-sm font-medium text-gray-700 mb-2",children:"Caption"}),(0,a.jsx)("input",{type:"text",id:"caption",name:"caption",value:r.caption,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Optional caption for the image"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-2",children:"Description"}),(0,a.jsx)("textarea",{id:"description",name:"description",value:r.description,onChange:g,rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Detailed description of the image"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"tags",className:"block text-sm font-medium text-gray-700 mb-2",children:"Tags"}),(0,a.jsx)("input",{type:"text",id:"tags",name:"tags",value:r.tags,onChange:g,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-transparent",placeholder:"Comma-separated tags for categorization"}),(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:"e.g., hero, banner, product, team"})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3 pt-6 border-t border-gray-200",children:[(0,a.jsx)("button",{type:"button",onClick:t,className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:d,className:"px-4 py-2 bg-indigo-600 hover:bg-indigo-700 disabled:bg-gray-400 text-white rounded-md font-medium transition-colors",children:d?"Saving...":"Save Changes"})]})]})})]})]})})})}function n(e){let{image:s,onClose:t,onEdit:i,onDelete:r}=e,[n,d]=(0,l.useState)([]),[c,o]=(0,l.useState)(!0);(0,l.useEffect)(()=>{(async()=>{try{let e=await fetch("/api/images/".concat(s.id,"/usage"));if(e.ok){let s=await e.json();d(s.usage)}}catch(e){}finally{o(!1)}})()},[s.id]);let x=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),m=e=>{navigator.clipboard.writeText(e)};return(0,a.jsx)("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:(0,a.jsx)("div",{className:"bg-white rounded-lg shadow-xl max-w-6xl w-full mx-4 max-h-[90vh] overflow-y-auto",children:(0,a.jsxs)("div",{className:"p-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Image Details"}),(0,a.jsx)("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 text-2xl",children:"\xd7"})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsx)("div",{className:"aspect-square bg-gray-100 rounded-lg overflow-hidden",children:(0,a.jsx)("img",{src:s.file_path,alt:s.alt_text||s.original_name,className:"w-full h-full object-cover"})}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{onClick:i,className:"flex-1 bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md font-medium transition-colors",children:"Edit Image"}),(0,a.jsx)("button",{onClick:()=>m(s.file_path),className:"px-4 py-2 border border-gray-300 rounded-md text-gray-700 hover:bg-gray-50 transition-colors",title:"Copy image URL",children:"\uD83D\uDCCB"}),(0,a.jsx)("button",{onClick:r,className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md font-medium transition-colors",children:"\uD83D\uDDD1️"})]})]}),(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Basic Information"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Filename"}),(0,a.jsx)("p",{className:"text-gray-900",children:s.original_name})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"File Size"}),(0,a.jsx)("p",{className:"text-gray-900",children:(e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]})(s.file_size)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Dimensions"}),(0,a.jsxs)("p",{className:"text-gray-900",children:[s.width," \xd7 ",s.height," pixels"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Format"}),(0,a.jsx)("p",{className:"text-gray-900",children:s.format})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Upload Date"}),(0,a.jsx)("p",{className:"text-gray-900",children:x(s.upload_date)})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Last Modified"}),(0,a.jsx)("p",{className:"text-gray-900",children:x(s.last_modified)})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"SEO Information"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-2",children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"SEO Score"}),(0,a.jsxs)("span",{className:"px-3 py-1 rounded-full text-sm font-medium ".concat(s.seo_score>=80?"bg-green-100 text-green-800":s.seo_score>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:[s.seo_score,"/100"]})]}),(0,a.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,a.jsx)("div",{className:"h-2 rounded-full ".concat(s.seo_score>=80?"bg-green-500":s.seo_score>=60?"bg-yellow-500":"bg-red-500"),style:{width:"".concat(s.seo_score,"%")}})})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Title"}),(0,a.jsx)("p",{className:"text-gray-900",children:s.title||"Not set"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Alt Text"}),(0,a.jsx)("p",{className:"text-gray-900",children:s.alt_text||"Not set"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Caption"}),(0,a.jsx)("p",{className:"text-gray-900",children:s.caption||"Not set"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Description"}),(0,a.jsx)("p",{className:"text-gray-900",children:s.description||"Not set"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"text-sm font-medium text-gray-600",children:"Tags"}),(0,a.jsx)("p",{className:"text-gray-900",children:s.tags||"Not set"})]})]})]}),(0,a.jsxs)("div",{className:"bg-gray-50 p-6 rounded-lg",children:[(0,a.jsxs)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:["Usage Information (",n.length,")"]}),c?(0,a.jsxs)("div",{className:"text-center py-4",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-indigo-600 mx-auto"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Loading usage data..."})]}):0===n.length?(0,a.jsxs)("div",{className:"text-center py-4",children:[(0,a.jsx)("span",{className:"text-4xl",children:"\uD83D\uDCC4"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"This image is not used on any pages yet"})]}):(0,a.jsx)("div",{className:"space-y-3 max-h-60 overflow-y-auto",children:n.map(e=>(0,a.jsx)("div",{className:"border border-gray-200 rounded-lg p-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"font-medium text-gray-900",children:e.page_title||e.page_path}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:e.page_path}),e.usage_context&&(0,a.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:e.usage_context})]}),(0,a.jsx)("div",{className:"text-xs text-gray-500",children:x(e.created_at)})]})},e.id))})]})]})]})]})})})}function d(){let[e,s]=(0,l.useState)(null),[t,i]=(0,l.useState)(null),[r,n]=(0,l.useState)(!0),d=async()=>{try{n(!0);let e=await fetch("/api/seo/analysis");if(e.ok){let t=await e.json();s(t.analysis),i(t.imagesWithIssues)}}catch(e){}finally{n(!1)}};return((0,l.useEffect)(()=>{d()},[]),r)?(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsxs)("div",{className:"animate-pulse",children:[(0,a.jsx)("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-4"}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-5/6"}),(0,a.jsx)("div",{className:"h-4 bg-gray-200 rounded w-4/6"})]})]})}):e?(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"SEO Overview"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-indigo-600",children:e.totalImages}),(0,a.jsx)("div",{className:"text-gray-600",children:"Total Images"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-green-600",children:e.averageSeoScore}),(0,a.jsx)("div",{className:"text-gray-600",children:"Average SEO Score"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"text-3xl font-bold text-blue-600",children:e.recommendations.length}),(0,a.jsx)("div",{className:"text-gray-600",children:"Recommendations"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"SEO Score Distribution"}),(0,a.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,a.jsxs)("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-green-600",children:e.seoDistribution.excellent}),(0,a.jsx)("div",{className:"text-sm text-green-700",children:"Excellent (80-100)"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-yellow-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-yellow-600",children:e.seoDistribution.good}),(0,a.jsx)("div",{className:"text-sm text-yellow-700",children:"Good (60-79)"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-orange-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-orange-600",children:e.seoDistribution.fair}),(0,a.jsx)("div",{className:"text-sm text-orange-700",children:"Fair (40-59)"})]}),(0,a.jsxs)("div",{className:"text-center p-4 bg-red-50 rounded-lg",children:[(0,a.jsx)("div",{className:"text-2xl font-bold text-red-600",children:e.seoDistribution.poor}),(0,a.jsx)("div",{className:"text-sm text-red-700",children:"Poor (0-39)"})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Issues Found"}),(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[(0,a.jsx)("div",{className:"p-4 border border-red-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Missing Alt Text"}),(0,a.jsx)("span",{className:"text-lg font-bold text-red-600",children:e.issues.missingAltText})]})}),(0,a.jsx)("div",{className:"p-4 border border-orange-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Missing Title"}),(0,a.jsx)("span",{className:"text-lg font-bold text-orange-600",children:e.issues.missingTitle})]})}),(0,a.jsx)("div",{className:"p-4 border border-yellow-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Large File Size"}),(0,a.jsx)("span",{className:"text-lg font-bold text-yellow-600",children:e.issues.largeFileSize})]})}),(0,a.jsx)("div",{className:"p-4 border border-blue-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Low Resolution"}),(0,a.jsx)("span",{className:"text-lg font-bold text-blue-600",children:e.issues.lowResolution})]})}),(0,a.jsx)("div",{className:"p-4 border border-purple-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Missing Caption"}),(0,a.jsx)("span",{className:"text-lg font-bold text-purple-600",children:e.issues.missingCaption})]})}),(0,a.jsx)("div",{className:"p-4 border border-indigo-200 rounded-lg",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("span",{className:"text-sm font-medium text-gray-700",children:"Missing Tags"}),(0,a.jsx)("span",{className:"text-lg font-bold text-indigo-600",children:e.issues.missingTags})]})})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Recommendations"}),0===e.recommendations.length?(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("span",{className:"text-4xl",children:"\uD83C\uDF89"}),(0,a.jsx)("p",{className:"text-gray-600 mt-2",children:"Great job! No major SEO issues found."})]}):(0,a.jsx)("div",{className:"space-y-3",children:e.recommendations.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-start space-x-3 p-3 bg-blue-50 rounded-lg",children:[(0,a.jsx)("span",{className:"text-blue-600 mt-1",children:"\uD83D\uDCA1"}),(0,a.jsx)("p",{className:"text-blue-800",children:e})]},s))})]}),t&&(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow p-6",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Images Needing Attention"}),(0,a.jsxs)("div",{className:"space-y-6",children:[t.missingAltText.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"font-medium text-red-700 mb-3",children:["Missing Alt Text (",t.missingAltText.length,")"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:t.missingAltText.map(e=>(0,a.jsx)("div",{className:"border border-red-200 rounded-lg p-3",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("img",{src:e.file_path,alt:"",className:"w-12 h-12 object-cover rounded"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.original_name}),(0,a.jsxs)("p",{className:"text-xs text-gray-500",children:["SEO Score: ",e.seo_score]})]})]})},e.id))})]}),t.lowSeoScore.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"font-medium text-orange-700 mb-3",children:["Low SEO Score (",t.lowSeoScore.length,")"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:t.lowSeoScore.map(e=>(0,a.jsx)("div",{className:"border border-orange-200 rounded-lg p-3",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("img",{src:e.file_path,alt:"",className:"w-12 h-12 object-cover rounded"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.original_name}),(0,a.jsxs)("p",{className:"text-xs text-orange-600",children:["SEO Score: ",e.seo_score]})]})]})},e.id))})]}),t.largeFiles.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("h4",{className:"font-medium text-yellow-700 mb-3",children:["Large File Size (",t.largeFiles.length,")"]}),(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-3",children:t.largeFiles.map(e=>(0,a.jsx)("div",{className:"border border-yellow-200 rounded-lg p-3",children:(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("img",{src:e.file_path,alt:"",className:"w-12 h-12 object-cover rounded"}),(0,a.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-900 truncate",children:e.original_name}),(0,a.jsxs)("p",{className:"text-xs text-yellow-600",children:["Size: ",Math.round(e.file_size/1024/1024),"MB"]})]})]})},e.id))})]})]})]})]}):(0,a.jsx)("div",{className:"bg-white rounded-lg shadow p-6",children:(0,a.jsx)("p",{className:"text-gray-600",children:"No SEO analysis data available"})})}function c(){let[e,s]=(0,l.useState)([]),[t,c]=(0,l.useState)(!0),[o,x]=(0,l.useState)({page:1,limit:20,total:0,totalPages:0}),[m,g]=(0,l.useState)(""),[h,u]=(0,l.useState)("upload_date"),[p,j]=(0,l.useState)("DESC"),[b,f]=(0,l.useState)(null),[N,y]=(0,l.useState)(!1),[v,w]=(0,l.useState)(!1),[S,D]=(0,l.useState)(!1),[_,C]=(0,l.useState)(!1),[E,k]=(0,l.useState)("images"),F=async()=>{try{c(!0);let e=new URLSearchParams({page:o.page.toString(),limit:o.limit.toString(),search:m,sortBy:h,sortOrder:p}),t=await fetch("/api/images?".concat(e));if(t.ok){let e=await t.json();s(e.images),x(e.pagination)}}catch(e){}finally{c(!1)}};(0,l.useEffect)(()=>{F()},[o.page,m,h,p]);let M=e=>{f(e),D(!0)},T=e=>{f(e),w(!0)},B=async e=>{if(confirm('Are you sure you want to delete "'.concat(e.original_name,'"?')))try{(await fetch("/api/images/".concat(e.id),{method:"DELETE"})).ok&&(F(),D(!1),f(null))}catch(e){}},O=e=>{if(0===e)return"0 Bytes";let s=Math.floor(Math.log(e)/Math.log(1024));return parseFloat((e/Math.pow(1024,s)).toFixed(2))+" "+["Bytes","KB","MB","GB"][s]},I=async()=>{C(!0);try{let e=await fetch("/api/images/scan",{method:"POST"});if(e.ok){let s=await e.json();alert("Scan completed! Found ".concat(s.scannedCount," new images.")),F()}}catch(e){alert("Error scanning images. Please try again.")}finally{C(!1)}};return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900",children:"Image Management"}),(0,a.jsx)("p",{className:"text-gray-600 mt-1",children:"Manage all website images, metadata, and SEO optimization"})]}),(0,a.jsxs)("div",{className:"flex space-x-3",children:[(0,a.jsx)("button",{onClick:I,disabled:_,className:"bg-green-600 hover:bg-green-700 disabled:bg-gray-400 text-white px-4 py-2 rounded-md font-medium transition-colors",children:_?"Scanning...":"Scan Existing Images"}),(0,a.jsx)("button",{onClick:()=>y(!0),className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md font-medium transition-colors",children:"Upload Images"})]})]}),(0,a.jsx)("div",{className:"border-b border-gray-200",children:(0,a.jsxs)("nav",{className:"-mb-px flex space-x-8",children:[(0,a.jsx)("button",{onClick:()=>k("images"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("images"===E?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"Images"}),(0,a.jsx)("button",{onClick:()=>k("seo"),className:"py-2 px-1 border-b-2 font-medium text-sm ".concat("seo"===E?"border-indigo-500 text-indigo-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"),children:"SEO Analysis"})]})}),"images"===E?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-indigo-100 rounded-lg",children:(0,a.jsx)("span",{className:"text-indigo-600 text-xl",children:"\uD83D\uDDBC️"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Images"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:o.total})]})]})}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-green-100 rounded-lg",children:(0,a.jsx)("span",{className:"text-green-600 text-xl",children:"\uD83D\uDCCA"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Avg SEO Score"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.length>0?Math.round(e.reduce((e,s)=>e+s.seo_score,0)/e.length):0})]})]})}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-yellow-100 rounded-lg",children:(0,a.jsx)("span",{className:"text-yellow-600 text-xl",children:"⚠️"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Missing Alt Text"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.filter(e=>!e.alt_text).length})]})]})}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,a.jsxs)("div",{className:"flex items-center",children:[(0,a.jsx)("div",{className:"p-2 bg-blue-100 rounded-lg",children:(0,a.jsx)("span",{className:"text-blue-600 text-xl",children:"\uD83D\uDCC8"})}),(0,a.jsxs)("div",{className:"ml-4",children:[(0,a.jsx)("p",{className:"text-sm font-medium text-gray-600",children:"Total Usage"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-gray-900",children:e.reduce((e,s)=>e+s.usage_count,0)})]})]})})]}),(0,a.jsx)("div",{className:"bg-white p-6 rounded-lg shadow",children:(0,a.jsxs)("form",{onSubmit:e=>{e.preventDefault(),x(e=>({...e,page:1})),F()},className:"flex flex-col md:flex-row gap-4",children:[(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)("input",{type:"text",placeholder:"Search images by name, title, alt text, or tags...",value:m,onChange:e=>g(e.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-transparent"})}),(0,a.jsxs)("div",{className:"flex gap-2",children:[(0,a.jsxs)("select",{value:h,onChange:e=>u(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"upload_date",children:"Upload Date"}),(0,a.jsx)("option",{value:"filename",children:"Filename"}),(0,a.jsx)("option",{value:"file_size",children:"File Size"}),(0,a.jsx)("option",{value:"seo_score",children:"SEO Score"}),(0,a.jsx)("option",{value:"usage_count",children:"Usage Count"})]}),(0,a.jsxs)("select",{value:p,onChange:e=>j(e.target.value),className:"px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-indigo-500 focus:border-transparent",children:[(0,a.jsx)("option",{value:"DESC",children:"Descending"}),(0,a.jsx)("option",{value:"ASC",children:"Ascending"})]}),(0,a.jsx)("button",{type:"submit",className:"bg-indigo-600 hover:bg-indigo-700 text-white px-4 py-2 rounded-md font-medium transition-colors",children:"Search"})]})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg shadow",children:[t?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-indigo-600 mx-auto"}),(0,a.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading images..."})]}):0===e.length?(0,a.jsxs)("div",{className:"p-8 text-center",children:[(0,a.jsx)("span",{className:"text-6xl",children:"\uD83D\uDDBC️"}),(0,a.jsx)("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"No images found"}),(0,a.jsx)("p",{className:"mt-2 text-gray-600",children:"Upload your first image to get started"})]}):(0,a.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 p-6",children:e.map(e=>(0,a.jsxs)("div",{className:"border border-gray-200 rounded-lg overflow-hidden hover:shadow-lg transition-shadow cursor-pointer",onClick:()=>M(e),children:[(0,a.jsx)("div",{className:"aspect-square bg-gray-100 flex items-center justify-center",children:(0,a.jsx)("img",{src:e.file_path,alt:e.alt_text||e.original_name,className:"w-full h-full object-cover",onError:e=>{let s=e.target;s.style.display="none",s.parentElement.innerHTML='<div class="flex items-center justify-center h-full text-gray-400"><span class="text-4xl">\uD83D\uDDBC️</span></div>'}})}),(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h3",{className:"font-medium text-gray-900 truncate",title:e.original_name,children:e.original_name}),e.title&&(0,a.jsx)("p",{className:"text-sm text-gray-600 truncate mt-1",title:e.title,children:e.title}),(0,a.jsxs)("div",{className:"flex items-center justify-between mt-3",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsxs)("span",{className:"px-2 py-1 text-xs rounded-full ".concat(e.seo_score>=80?"bg-green-100 text-green-800":e.seo_score>=60?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"),children:["SEO: ",e.seo_score]}),(0,a.jsx)("span",{className:"text-xs text-gray-500",children:O(e.file_size)})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-1",children:[(0,a.jsx)("button",{onClick:s=>{s.stopPropagation(),T(e)},className:"p-1 text-gray-400 hover:text-indigo-600 transition-colors",title:"Edit",children:"✏️"}),(0,a.jsx)("button",{onClick:s=>{s.stopPropagation(),B(e)},className:"p-1 text-gray-400 hover:text-red-600 transition-colors",title:"Delete",children:"\uD83D\uDDD1️"})]})]})]})]},e.id))}),o.totalPages>1&&(0,a.jsx)("div",{className:"px-6 py-4 border-t border-gray-200",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-700",children:["Showing ",(o.page-1)*o.limit+1," to"," ",Math.min(o.page*o.limit,o.total)," of"," ",o.total," results"]}),(0,a.jsxs)("div",{className:"flex space-x-2",children:[(0,a.jsx)("button",{onClick:()=>x(e=>({...e,page:e.page-1})),disabled:1===o.page,className:"px-3 py-1 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Previous"}),(0,a.jsxs)("span",{className:"px-3 py-1 text-sm",children:["Page ",o.page," of ",o.totalPages]}),(0,a.jsx)("button",{onClick:()=>x(e=>({...e,page:e.page+1})),disabled:o.page===o.totalPages,className:"px-3 py-1 border border-gray-300 rounded-md text-sm disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50",children:"Next"})]})]})})]})]}):(0,a.jsx)(d,{}),N&&(0,a.jsx)(i,{onClose:()=>y(!1),onUpload:F}),v&&b&&(0,a.jsx)(r,{image:b,onClose:()=>{w(!1),f(null)},onUpdate:F}),S&&b&&(0,a.jsx)(n,{image:b,onClose:()=>{D(!1),f(null)},onEdit:()=>{D(!1),w(!0)},onDelete:()=>{D(!1),B(b)}})]})}}},e=>{var s=s=>e(e.s=s);e.O(0,[8441,1684,7358],()=>s(6155)),_N_E=e.O()}]);